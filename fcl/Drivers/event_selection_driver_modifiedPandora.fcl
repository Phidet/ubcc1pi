#include "event_selection.fcl"
#include "hitslicer.fcl"
#include "reco_uboone_mcc9_8_driver_stage2.fcl"

process_name: EventSelection

source:
{
    module_type:                RootInput
    maxEvents:                 -1
    saveMemoryObjectThreshold:  0
}

services.TFileService: {fileName: "eventSelection.root"}

physics:
{
    producers:
    {
        hitSlicer:                   @local::hitslicer
        pandoraNuSlice:              @local::microboone_pandoraAllHitsNu
        pandoraAllAsTrack:           @local::microboone_pandoraTrackCreation
        pandoraAllAsTrackCaloSCE:    @local::microboone_reco_mcc8_producers.pandoracaloSCE
        pandoraAllAsTrackCaliSCE:    @local::microboone_reco_mcc8_producers.pandoracaliSCE
        pandoraAllAsTrackCaliPidSCE: @local::microboone_reco_mcc8_producers.pandoracalipidSCE
    }

    analyzers:
    {
        eventSelection: @local::event_selection
    }

    reco: [ hitSlicer, pandoraNuSlice, pandoraAllAsTrack, pandoraAllAsTrackCaloSCE, pandoraAllAsTrackCaliSCE, pandoraAllAsTrackCaliPidSCE ]
    ana: [ eventSelection ]

    trigger_paths: [ reco ]
    end_paths: [ ana ]
}

physics.producers.pandoraNuSlice.HitFinderModuleLabel:                "hitSlicer"
physics.producers.pandoraNuSlice.ConfigFile:                          "PandoraSettings_Master_MicroBooNE_ubcc1pi.xml"

physics.producers.pandoraAllAsTrack.PFParticleLabel:                  "pandoraNuSlice"
physics.producers.pandoraAllAsTrack.UseAllParticles:                  true

physics.producers.pandoraAllAsTrackCaloSCE.TrackModuleLabel:          "pandoraAllAsTrack"
physics.producers.pandoraAllAsTrackCaloSCE.SpacePointModuleLabel:     "pandoraNuSlice"

physics.producers.pandoraAllAsTrackCaliSCE.TrackModuleLabel:          "pandoraAllAsTrack"
physics.producers.pandoraAllAsTrackCaliSCE.CalorimetryModuleLabel:    "pandoraAllAsTrackCaloSCE"

physics.producers.pandoraAllAsTrackCaliPidSCE.TrackModuleLabel:       "pandoraAllAsTrack"
physics.producers.pandoraAllAsTrackCaliPidSCE.CalorimetryModuleLabel: "pandoraAllAsTrackCaliSCE"
         
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.CaloTrackAssn:    "pandoraAllAsTrackCaliSCE"
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.CalorimetryLabel: "pandoraAllAsTrackCaliSCE"
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.HitTrackAssn:     "pandoraAllAsTrack"
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.TrackLabel:       "pandoraAllAsTrack"
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.HitLabel:         "hitSlicer"
physics.producers.pandoraAllAsTrackCaliPidSCE.ProducerLabels.HitTruthAssn:     "hitSlicer"

physics.analyzers.eventSelection.BacktrackerLabel:   "hitSlicer"
physics.analyzers.eventSelection.PFParticleLabel:    "pandoraNuSlice"
physics.analyzers.eventSelection.TrackLabel:         "pandoraAllAsTrack"
physics.analyzers.eventSelection.CalorimetryLabel:   "pandoraAllAsTrackCaliSCE"
physics.analyzers.eventSelection.PIDLabel:           "pandoraAllAsTrackCaliPidSCE"
