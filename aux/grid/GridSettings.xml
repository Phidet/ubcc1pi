<?xml version="1.0"?>

<!DOCTYPE project [

<!-- =================================================================================================================================== -->
<!-- Settings that you might want to modify                                                                                              -->
<!-- =================================================================================================================================== -->

<!-- Names -->
<!ENTITY username        "asmith">

<!-- LArSoft version -->
<!ENTITY tag             "v08_00_00_13">
<!ENTITY qual            "e17:prof">

<!--
    You will also need to make a tarball of your local environment (with ubcc1pi cloned) that you have tested with the above versions.
    To do this run the command: ./make_tar
-->

<!-- Input files -->
<!ENTITY inputDef        "prodgenie_bnb_nu_uboone_overlay_mcc9.1_run1_reco2">

<!-- Job settings -->
<!ENTITY numJobs         "10"> <!-- 605 jobs total at 40 files / job (24198 files) --> 
<!ENTITY maxFilesPerJob  "40">
<!ENTITY numEvents       "9999999">
<!-- NB. I use large number for numEvents to get all events in the files, it's not really the number of events that will be processed -->



<!-- =================================================================================================================================== -->
<!-- Settings that you probably won't need to modify                                                                                     -->
<!-- =================================================================================================================================== -->

<!-- Shorthands -->
<!ENTITY projectName     "ubcc1pi">
<!ENTITY dataTier        "ana">
<!ENTITY schema          "root">

<!-- Stages -->
<!ENTITY truthStudyName  "truthStudy">
<!ENTITY truthStudyFcl   "truth_study_driver.fcl">

<!ENTITY pidStudyName    "pidStudy">
<!ENTITY pidStudyFcl     "pid_study_driver_all_as_tracks.fcl">

<!ENTITY eventSelectionName  "eventSelection">
<!ENTITY eventSelectionFcl   "event_selection_driver.fcl">

<!ENTITY energyEstimatorName  "energyEstimator">
<!ENTITY energyEstimatorFcl   "energy_estimator_driver.fcl">

]>

<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->
<!-- Below are the project.py settings for each stage                                                                                    -->
<!-- =================================================================================================================================== -->
<!-- =================================================================================================================================== -->

<project name="&projectName;">

    <!-- =============================================================================================================================== -->
    <!-- Set up the LArSoft version                                                                                                      -->
    <!-- =============================================================================================================================== -->
    <larsoft>
        <tag>&tag;</tag>
        <qual>&qual;</qual>
        <local>/pnfs/uboone/resilient/users/&username;/tars/&projectName;/local.tar</local>
    </larsoft>
    
    <!-- =============================================================================================================================== -->
    <!-- Set up the project -->
    <!-- =============================================================================================================================== -->
    <group>uboone</group>
    <os>SL6</os>
    <resource>DEDICATED,OPPORTUNISTIC</resource>

    <numjobs>&numJobs;</numjobs>
    <maxfilesperjob>&maxFilesPerJob;</maxfilesperjob>
    <numevents>&numEvents;</numevents>
    
    <!-- =============================================================================================================================== -->
    <!-- Truth study -->
    <!-- =============================================================================================================================== -->
    <stage name="&truthStudyName;">
        <!-- Settings -->
        <fcl>&truthStudyFcl;</fcl>
        <numjobs>&numJobs;</numjobs>
        <maxfilesperjob>&maxFilesPerJob;</maxfilesperjob>
        <numevents>&numEvents;</numevents>

        <!-- Input files -->
        <inputdef>&inputDef;</inputdef>

        <!-- Output directories -->
        <outdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&truthStudyName;/</outdir> 
        <logdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&truthStudyName;/</logdir> 
        <workdir>/pnfs/uboone/resilient/users/&username;/work/&projectName;/&truthStudyName;/</workdir> 

        <!-- Options -->
        <datatier>&dataTier;</datatier>
        <schema>&schema;</schema>
    </stage>
    
    <!-- =============================================================================================================================== -->
    <!-- PID study -->
    <!-- =============================================================================================================================== -->
    <stage name="&pidStudyName;">
        <!-- Settings -->
        <fcl>&pidStudyFcl;</fcl>
        <numjobs>&numJobs;</numjobs>
        <maxfilesperjob>&maxFilesPerJob;</maxfilesperjob>
        <numevents>&numEvents;</numevents>

        <!-- Input files -->
        <inputdef>&inputDef;</inputdef>

        <!-- Output directories -->
        <outdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&pidStudyName;/</outdir> 
        <logdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&pidStudyName;/</logdir> 
        <workdir>/pnfs/uboone/resilient/users/&username;/work/&projectName;/&pidStudyName;/</workdir> 

        <!-- Options -->
        <datatier>&dataTier;</datatier>
        <schema>&schema;</schema>
    </stage>
    
    <!-- =============================================================================================================================== -->
    <!-- Event Selection -->
    <!-- =============================================================================================================================== -->
    <stage name="&eventSelectionName;">
        <!-- Settings -->
        <fcl>&eventSelectionFcl;</fcl>
        <numjobs>&numJobs;</numjobs>
        <maxfilesperjob>&maxFilesPerJob;</maxfilesperjob>
        <numevents>&numEvents;</numevents>

        <!-- Input files -->
        <inputdef>&inputDef;</inputdef>

        <!-- Output directories -->
        <outdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&eventSelectionName;/</outdir> 
        <logdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&eventSelectionName;/</logdir> 
        <workdir>/pnfs/uboone/resilient/users/&username;/work/&projectName;/&eventSelectionName;/</workdir> 

        <!-- Options -->
        <datatier>&dataTier;</datatier>
        <schema>&schema;</schema>
    </stage>
    
    
    <!-- =============================================================================================================================== -->
    <!-- Energy Estimator -->
    <!-- =============================================================================================================================== -->
    <stage name="&energyEstimatorName;">
        <!-- Settings -->
        <fcl>&energyEstimatorFcl;</fcl>
        <numjobs>&numJobs;</numjobs>
        <maxfilesperjob>&maxFilesPerJob;</maxfilesperjob>
        <numevents>&numEvents;</numevents>

        <!-- Input files -->
        <inputdef>&inputDef;</inputdef>

        <!-- Output directories -->
        <outdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&energyEstimatorName;/</outdir> 
        <logdir>/pnfs/uboone/scratch/users/&username;/&projectName;/&energyEstimatorName;/</logdir> 
        <workdir>/pnfs/uboone/resilient/users/&username;/work/&projectName;/&energyEstimatorName;/</workdir> 

        <!-- Options -->
        <datatier>&dataTier;</datatier>
        <schema>&schema;</schema>
    </stage>
</project>
